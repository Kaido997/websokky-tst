<!DOCTYPE html>
<html lang="en">  
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
        <script src="https://cdn.socket.io/4.3.2/socket.io.min.js" integrity="sha384-KAZ4DtjNhLChOB/hxXuKqhMLYvx3b5MlT55xPEiNmREKRzeEm+RVPlTnAn0ajQNs" crossorigin="anonymous"></script>
    </head>
    <body>
        <section class="page">
            <button id="start" onclick="connect()">Connect to survey</button>
            <button id="end" style="display: none" onclick="disconnect()">Disconnect</button>
            <div id="survey">
                <div class="conversation-area" id="conversation-area">
                </div>
                <section class="answers-area" id="answers-area">
                </section>
            </div>
        </section>
    <script src="/client.eb3e1584.js"></script></body>
    <script defer="">function renderData(data) {
    console.log(data);
    const { question, answers } = data;
    const elconv = document.getElementById("conversation-area");
    const elansw = document.getElementById("answers-area");
    const qnode = document.createElement("p");
    qnode.className = "question";
    qnode.innerHTML = question;
    elconv.appendChild(qnode);
    for (answer of answers){
        const nodeb = document.createElement("button");
        nodeb.innerHTML = answer.text;
        nodeb.className = "answers";
        nodeb.value = answer.value.toString();
        elansw.appendChild(nodeb);
    }
}
let socket = null;
function disconnect() {
    socket.close();
    const el = document.getElementById("survey");
    const button = document.getElementById("start");
    const buttonend = document.getElementById("end");
    button.style.display = "block";
    buttonend.style.display = "none";
    el.style.display = "none";
    document.refresh();
}
function connect() {
    const el = document.getElementById("survey");
    const button = document.getElementById("start");
    const buttonend = document.getElementById("end");
    button.style.display = "none";
    buttonend.style.display = "block";
    el.style.display = "flex";
    socket = io("http://localhost:3000", {
        auth: {
            token: "123"
        },
        query: {
            "my-key": "my-value"
        }
    });
    socket.on("connect", function(data) {
        if (data) return renderData(data);
        console.log("event connect No data", data);
    });
    socket.on("message", function(data) {
        if (data) return renderData(data);
        console.log("Event message No data", data);
    });
    socket.on("disconnect", function() {
        console.log("Disconnected");
    });
}

</script>
</html>
<style>* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

.page {
  place-items: center;
  width: 100%;
  height: 100vh;
  margin: 0 auto;
  display: grid;
  overflow: hidden;
}

#survey {
  background-color: #000;
  border-radius: 4px;
  flex-flow: column wrap;
  justify-content: flex-end;
  width: 100%;
  max-width: 720px;
  height: 100vh;
  max-height: 720px;
  display: none;
}

.question, .answer {
  color: #fff;
  border: 1px solid #fff;
  border-radius: 4px;
  margin: 10px 0;
  padding: 5px;
  font-size: 18px;
}

button {
  color: #fff;
  cursor: pointer;
  background-color: #000;
  border: 1px solid #000;
  border-radius: 4px;
  padding: 10px;
  font-size: 12px;
}

.answers {
  min-width: 50px;
  margin: 0 0 0 10px;
}

.answers-area {
  background-color: #fff;
  border: 1px solid #000;
  border-radius: 4px;
  justify-content: center;
  width: 100%;
  height: 10%;
  padding: 10px;
  display: flex;
}

.conversation-area {
  flex-direction: column;
  justify-content: flex-end;
  width: 100%;
  height: 90%;
  padding: 10px 10px 20px;
  display: flex;
}

.answer {
  align-self: flex-end;
}

.question {
  align-self: flex-start;
}
</style>

